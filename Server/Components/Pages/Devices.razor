@page "/devices"
@using HomeEnergy.Components.Dialogs
@inject Services.DevicesManager DevicesManager
@inject IDialogService DialogService
<h3>Devices</h3>

<MudGrid>
    @foreach (var device in DevicesManager.GetDevices())
    {
        <MudCard>
            <MudCardHeader>
                <CardHeaderContent>
                    <MudText Typo="Typo.h6">@device.Name</MudText>
                </CardHeaderContent>
                <CardHeaderActions>
                    <MudIconButton Icon="@Icons.Material.Filled.Settings" Color="Color.Default" />
                </CardHeaderActions>
            </MudCardHeader>
            <MudCardContent>
                <MudText Typo="Typo.body1">Device ID: @device.Id</MudText>
            </MudCardContent>
        </MudCard>
    }
    <MudCard>
        @*         <MudCardHeader>
            <CardHeaderContent>
                <MudText Typo="Typo.h6">Add device</MudText>
            </CardHeaderContent>
        </MudCardHeader>
        <MudCardContent>
            <MudText Typo="Typo.body1">Device ID: @device.Id</MudText>
        </MudCardContent> *@
        <MudCardActions>
            <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="AddDevice">Add new device</MudButton>
        </MudCardActions>
    </MudCard>
</MudGrid>


@code {
    private async Task AddDevice(MouseEventArgs args)
    {
        await DialogService.ShowAsync<AddDevice>("Add Device");
        StateHasChanged();

    }
}
